import { Metadata } from 'next';
import Link from 'next/link';
import { Calculator, CheckCircle, ArrowRight, AlertTriangle, ChevronRight } from 'lucide-react';

const baseUrl = 'https://www.sodusecure.com';

export const metadata: Metadata = {
  title: 'Was kostet ein Pentest in Berlin? Preise & Faktoren 2026 | SODU Secure',
  description: 'Pentest Kosten Berlin: Basis ab 2.500 €, KMU ab 8.000 €. Welche Faktoren den Preis bestimmen, was inbegriffen ist und warum ein Pentest günstiger ist als ein Sicherheitsvorfall.',
  keywords: [
    'Pentest Kosten Berlin',
    'Penetrationstest Preis Berlin',
    'Was kostet ein Pentest Berlin',
    'Pentest Preise 2026',
    'Pentest Angebot Berlin',
    'Penetrationstest Kosten KMU',
    'Cybersecurity Kosten Berlin',
  ],
  alternates: {
    canonical: `${baseUrl}/pentest-berlin/kosten`,
  },
  openGraph: {
    title: 'Was kostet ein Pentest in Berlin? Preise & Faktoren 2026',
    description: 'Transparente Pentest-Preise für Berliner Unternehmen. Basis ab 2.500 €, KMU-Pakete ab 8.000 €. Jetzt Angebot berechnen.',
    url: `${baseUrl}/pentest-berlin/kosten`,
    type: 'website',
  },
  robots: { index: true, follow: true },
};

const jsonLdFaq = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'Was kostet ein einfacher Webapplikations-Pentest in Berlin?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Ein fokussierter Webapplikations-Pentest (eine Anwendung, max. 20 Endpunkte) kostet bei SODU Secure ab 2.500 €. Dauer: 3–5 Werktage. Inbegriffen: OWASP Top 10, manuelle Exploitation, Abschlussbericht mit Risikobewertung.',
      },
    },
    {
      '@type': 'Question',
      name: 'Was kostet ein vollständiger KMU-Pentest in Berlin?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Ein KMU-Pentest (extern + Active Directory + optional Phishing) kostet ab 8.000 €. Der genaue Preis hängt von Anzahl der Systeme, Netzwerkgröße und gewünschten Testbereichen ab. Kontaktieren Sie uns für ein individuelles Angebot.',
      },
    },
    {
      '@type': 'Question',
      name: 'Was beeinflusst den Preis eines Pentests?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Die wichtigsten Preisfaktoren sind: Scope (Anzahl IPs, Domains, Endpunkte), Testtiefe (Black-Box vs. Grey-Box), Testzeitraum, Art der Systeme (Web, Netzwerk, Active Directory, Mobile), sowie Berichtsumfang und Präsentation.',
      },
    },
    {
      '@type': 'Question',
      name: 'Gibt es versteckte Kosten beim Pentest?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Nein. SODU Secure erstellt nach einem kostenlosen Erstgespräch ein verbindliches Festpreisangebot. Der Endbericht, die Abschlusspräsentation und ein Re-Test-Check (für kritische Findings) sind im Preis enthalten.',
      },
    },
    {
      '@type': 'Question',
      name: 'Wann lohnt sich ein Pentest finanziell?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Laut IBM Cost of a Data Breach Report 2024 kostet ein durchschnittlicher Sicherheitsvorfall in Deutschland 4,9 Millionen €. Ein Pentest ab 2.500 € identifiziert Schwachstellen, bevor Angreifer sie finden – ein Return on Investment von 100:1 ist keine Seltenheit.',
      },
    },
  ],
};

const jsonLdBreadcrumb = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'SODU Secure', item: baseUrl },
    { '@type': 'ListItem', position: 2, name: 'Pentest Berlin', item: `${baseUrl}/pentest-berlin` },
    { '@type': 'ListItem', position: 3, name: 'Pentest Kosten Berlin', item: `${baseUrl}/pentest-berlin/kosten` },
  ],
};

const pricingTiers = [
  {
    name: 'Basis',
    price: 'ab 2.500 €',
    duration: '3–5 Werktage',
    ideal: 'Startups, einzelne Web-Apps',
    color: 'border-blue-500',
    badge: 'bg-blue-500',
    items: [
      'Web Application Pentest (1 App)',
      'OWASP Top 10 Prüfung',
      'Manuelle Exploitation',
      'Schriftlicher Abschlussbericht',
      'Risikobewertung (CVSS)',
      'Abschlusspräsentation (Remote)',
    ],
  },
  {
    name: 'KMU',
    price: 'ab 8.000 €',
    duration: '2–3 Wochen',
    ideal: 'KMUs, Mittelstand, NIS2-Pflicht',
    color: 'border-red-500',
    badge: 'bg-red-500',
    badge2: 'Empfohlen',
    items: [
      'Externer Netzwerk-Pentest',
      'Web Application Pentest (bis 3 Apps)',
      'Active Directory Assessment',
      'Phishing-Simulation (optional)',
      'Detaillierter Abschlussbericht',
      'Priorisierte Maßnahmenempfehlungen',
      'Re-Test-Check für kritische Findings',
      'Abschlusspräsentation mit Management-Summary',
    ],
  },
  {
    name: 'Enterprise',
    price: 'Auf Anfrage',
    duration: '4–8 Wochen',
    ideal: 'Großunternehmen, KRITIS, Regulierung',
    color: 'border-purple-500',
    badge: 'bg-purple-500',
    items: [
      'Vollständiger Red-Team-Einsatz',
      'Multi-Segment Netzwerk-Pentest',
      'Cloud-Infrastruktur (AWS/Azure/GCP)',
      'Mobile App Testing',
      'Social Engineering',
      'Purple Team Workshop',
      'Executive Report + technischer Bericht',
      'Quartalsweise Re-Tests möglich',
    ],
  },
];

const costFactors = [
  { title: 'Scope & Umfang', desc: 'Anzahl der IPs, Domains, Endpunkte und Anwendungen bestimmt maßgeblich den Preis. Mehr Testfläche = mehr Aufwand.' },
  { title: 'Testtiefe', desc: 'Black-Box (kein Vorwissen) ist aufwendiger als Grey-Box (teilweises Vorwissen). White-Box-Tests inklusive Code-Review sind am umfassendsten.' },
  { title: 'Systemtypen', desc: 'Active Directory, OT/SCADA, Cloud-Infrastruktur oder Mobile Apps erfordern Spezialwissen und erhöhen den Preis gegenüber reinen Web-Tests.' },
  { title: 'Berichtsumfang', desc: 'Ein Management-Summary, Executive-Präsentation oder Compliance-Report (NIS2, ISO 27001) für Stakeholder kostet zusätzlichen Aufwand.' },
  { title: 'Zeitrahmen', desc: 'Express-Pentests mit verkürztem Testzeitraum sind teurer. Flexible Terminplanung reduziert die Kosten.' },
  { title: 'Re-Test', desc: 'Ein abschließender Re-Test nach Behebung kritischer Findings ist bei SODU Secure im KMU-Paket inklusive.' },
];

export default function KostenPage() {
  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLdFaq) }}
      />
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLdBreadcrumb) }}
      />

      <main className="bg-[#0d1117] min-h-screen text-white">

        {/* Breadcrumb */}
        <div className="bg-[#131927] border-b border-gray-800">
          <div className="container mx-auto px-4 sm:px-6 py-3">
            <nav className="flex items-center gap-2 text-sm text-gray-400" aria-label="Breadcrumb">
              <Link href="/" className="hover:text-white transition-colors">SODU Secure</Link>
              <ChevronRight className="w-3 h-3" />
              <Link href="/pentest-berlin" className="hover:text-white transition-colors">Pentest Berlin</Link>
              <ChevronRight className="w-3 h-3" />
              <span className="text-white">Pentest Kosten</span>
            </nav>
          </div>
        </div>

        {/* Hero */}
        <section className="py-16 sm:py-20 bg-gradient-to-b from-[#131927] to-[#0d1117]">
          <div className="container mx-auto px-4 sm:px-6 max-w-5xl text-center">
            <div className="inline-block bg-red-600/10 border border-red-500/30 rounded-full px-4 py-1.5 text-red-400 text-sm font-medium mb-6">
              Preistransparenz für Berliner Unternehmen
            </div>
            <h1 className="text-3xl sm:text-4xl lg:text-5xl font-bold mb-6 leading-tight">
              Was kostet ein{' '}
              <span className="text-red-500">Pentest in Berlin</span>?
            </h1>
            <p className="text-gray-300 text-lg sm:text-xl max-w-3xl mx-auto mb-8">
              Transparente Preise ohne versteckte Kosten. Basis ab 2.500 €, vollständige KMU-Pakete ab 8.000 €.
              Berechnen Sie jetzt Ihr individuelles Angebot.
            </p>
            <div className="flex flex-col sm:flex-row items-center justify-center gap-4">
              <Link
                href="/request-pentest"
                className="inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors text-base"
              >
                <Calculator className="w-5 h-5" />
                Pentest Kosten Berechnen
              </Link>
              <Link
                href="/pentest-berlin"
                className="inline-flex items-center gap-2 text-gray-300 hover:text-white transition-colors text-base"
              >
                ← Zurück zu Pentest Berlin
              </Link>
            </div>
          </div>
        </section>

        {/* Key stat */}
        <section className="py-10 bg-red-600/5 border-y border-red-500/20">
          <div className="container mx-auto px-4 sm:px-6 max-w-5xl">
            <div className="flex flex-col sm:flex-row items-center justify-center gap-6 sm:gap-12 text-center">
              <div>
                <div className="text-3xl font-bold text-red-500">4,9 Mio. €</div>
                <div className="text-sm text-gray-400 mt-1">Ø Kosten eines Datenschutzvorfalls (IBM 2024)</div>
              </div>
              <div className="hidden sm:block w-px h-12 bg-gray-700" />
              <div>
                <div className="text-3xl font-bold text-green-400">ab 2.500 €</div>
                <div className="text-sm text-gray-400 mt-1">Pentest Basis Berlin</div>
              </div>
              <div className="hidden sm:block w-px h-12 bg-gray-700" />
              <div>
                <div className="text-3xl font-bold text-blue-400">100:1</div>
                <div className="text-sm text-gray-400 mt-1">Typischer ROI eines Pentests</div>
              </div>
            </div>
          </div>
        </section>

        {/* Pricing Tiers */}
        <section className="py-16 sm:py-20">
          <div className="container mx-auto px-4 sm:px-6 max-w-6xl">
            <h2 className="text-2xl sm:text-3xl font-bold text-center mb-4">
              Pentest Preise Berlin 2026
            </h2>
            <p className="text-gray-400 text-center max-w-2xl mx-auto mb-12 text-sm sm:text-base">
              Festpreisangebote nach kostenlosem Erstgespräch. Kein Stundensatz, keine versteckten Kosten.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
              {pricingTiers.map((tier) => (
                <div key={tier.name} className={`bg-[#131927] rounded-xl border-2 ${tier.color} p-6 sm:p-8 relative flex flex-col`}>
                  {tier.badge2 && (
                    <div className="absolute -top-3 left-1/2 -translate-x-1/2 bg-red-600 text-white text-xs font-bold px-4 py-1 rounded-full">
                      {tier.badge2}
                    </div>
                  )}
                  <div className="mb-4">
                    <span className={`inline-block ${tier.badge} text-white text-xs font-semibold px-3 py-1 rounded-full mb-3`}>
                      {tier.name}
                    </span>
                    <div className="text-2xl sm:text-3xl font-bold text-white">{tier.price}</div>
                    <div className="text-sm text-gray-400 mt-1">{tier.duration} · {tier.ideal}</div>
                  </div>
                  <ul className="space-y-2 mb-8 flex-1">
                    {tier.items.map((item) => (
                      <li key={item} className="flex items-start gap-2 text-sm text-gray-300">
                        <CheckCircle className="w-4 h-4 text-green-400 mt-0.5 shrink-0" />
                        {item}
                      </li>
                    ))}
                  </ul>
                  <Link
                    href="/request-pentest"
                    className="block text-center bg-red-600 hover:bg-red-700 text-white py-2.5 rounded-lg font-medium transition-colors text-sm"
                  >
                    Angebot anfragen
                  </Link>
                </div>
              ))}
            </div>
            <p className="text-center text-xs text-gray-500 mt-6">
              * Alle Preise zzgl. MwSt. Verbindliches Festpreisangebot nach kostenlosem Scope-Gespräch (30 Min.).
            </p>
          </div>
        </section>

        {/* Cost Factors */}
        <section className="py-16 sm:py-20 bg-[#131927]">
          <div className="container mx-auto px-4 sm:px-6 max-w-5xl">
            <h2 className="text-2xl sm:text-3xl font-bold text-center mb-4">
              Was beeinflusst den Pentest-Preis?
            </h2>
            <p className="text-gray-400 text-center max-w-2xl mx-auto mb-12 text-sm sm:text-base">
              Diese 6 Faktoren bestimmen, was ein professioneller Penetrationstest in Berlin kostet.
            </p>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-6">
              {costFactors.map((f, i) => (
                <div key={i} className="bg-[#0d1117] rounded-xl p-6 border border-gray-800">
                  <h3 className="font-semibold text-white mb-2">{f.title}</h3>
                  <p className="text-sm text-gray-400">{f.desc}</p>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* What's included */}
        <section className="py-16 sm:py-20">
          <div className="container mx-auto px-4 sm:px-6 max-w-4xl">
            <h2 className="text-2xl sm:text-3xl font-bold text-center mb-12">
              Was ist immer im Pentest-Preis enthalten?
            </h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {[
                'Kostenloses Scope-Gespräch (30 Min.)',
                'Verbindliches Festpreisangebot',
                'Schriftlicher Abschlussbericht (DE/EN)',
                'Risikobewertung nach CVSS 3.1',
                'Priorisierte Maßnahmenempfehlungen',
                'Abschlusspräsentation (Remote oder Vor-Ort in Berlin)',
                'Re-Test-Check für kritische Findings (KMU+)',
                'NDA & vertragliche Beauftragungsgrundlage',
              ].map((item, i) => (
                <div key={i} className="flex items-center gap-3 bg-[#131927] rounded-lg p-4 border border-gray-800">
                  <CheckCircle className="w-5 h-5 text-green-400 shrink-0" />
                  <span className="text-sm text-gray-200">{item}</span>
                </div>
              ))}
            </div>
          </div>
        </section>

        {/* ROI Section */}
        <section className="py-16 sm:py-20 bg-[#131927]">
          <div className="container mx-auto px-4 sm:px-6 max-w-4xl">
            <div className="bg-gradient-to-r from-red-950/40 to-orange-950/30 border border-red-500/30 rounded-2xl p-8 sm:p-10">
              <div className="flex items-start gap-4 mb-6">
                <AlertTriangle className="w-8 h-8 text-red-400 shrink-0 mt-1" />
                <div>
                  <h2 className="text-xl sm:text-2xl font-bold text-white mb-2">
                    Warum ein Pentest günstiger ist als ein Sicherheitsvorfall
                  </h2>
                  <p className="text-gray-300 text-sm sm:text-base">
                    Laut dem IBM Cost of a Data Breach Report 2024 kostet ein Datenschutzvorfall in Deutschland durchschnittlich 4,9 Millionen Euro — inklusive Produktionsausfall, Notfallmaßnahmen, DSGVO-Bußgelder und Reputationsschäden.
                  </p>
                </div>
              </div>
              <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6">
                {[
                  { label: 'DSGVO-Bußgeld (max.)', value: '20 Mio. €', sub: 'Art. 83 DSGVO' },
                  { label: 'Ø Kosten Datenpanne DE', value: '4,9 Mio. €', sub: 'IBM Cost of Breach 2024' },
                  { label: 'KMU-Pentest Berlin', value: 'ab 8.000 €', sub: 'SODU Secure' },
                ].map((item, i) => (
                  <div key={i} className="bg-[#0d1117] rounded-xl p-4 text-center border border-gray-800">
                    <div className="text-xl sm:text-2xl font-bold text-red-400">{item.value}</div>
                    <div className="text-sm text-white font-medium mt-1">{item.label}</div>
                    <div className="text-xs text-gray-500 mt-1">{item.sub}</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </section>

        {/* FAQ */}
        <section className="py-16 sm:py-20">
          <div className="container mx-auto px-4 sm:px-6 max-w-3xl">
            <h2 className="text-2xl sm:text-3xl font-bold text-center mb-12">Häufige Fragen zu Pentest-Kosten</h2>
            <div className="space-y-4">
              {jsonLdFaq.mainEntity.map((qa, i) => (
                <details key={i} className="bg-[#131927] border border-gray-800 rounded-xl p-6 group">
                  <summary className="cursor-pointer font-semibold text-white list-none flex items-center justify-between gap-4">
                    <span>{qa.name}</span>
                    <ChevronRight className="w-4 h-4 text-gray-400 group-open:rotate-90 transition-transform shrink-0" />
                  </summary>
                  <p className="mt-4 text-gray-400 text-sm leading-relaxed">{qa.acceptedAnswer.text}</p>
                </details>
              ))}
            </div>
          </div>
        </section>

        {/* Related cluster links */}
        <section className="py-12 bg-[#131927] border-t border-gray-800">
          <div className="container mx-auto px-4 sm:px-6 max-w-5xl">
            <h2 className="text-lg font-semibold text-white mb-6 text-center">Weitere Themen rund um Pentest Berlin</h2>
            <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
              {[
                { href: '/pentest-berlin/kmu', title: 'Pentest Berlin für KMU', desc: 'Warum KMUs besonders gefährdet sind und wie ein maßgeschneiderter Pentest schützt.' },
                { href: '/pentest-berlin/intern-extern', title: 'Interner vs. Externer Pentest', desc: 'Unterschiede, Vor- und Nachteile und wann welcher Ansatz sinnvoll ist.' },
                { href: '/pentest-berlin/iso-27001', title: 'ISO 27001 Pentest Berlin', desc: 'Welche Pentests für ISO 27001 Zertifizierung und NIS2-Compliance erforderlich sind.' },
              ].map((link) => (
                <Link key={link.href} href={link.href} className="bg-[#0d1117] border border-gray-800 rounded-xl p-5 hover:border-red-500/50 transition-colors group">
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="font-semibold text-white text-sm group-hover:text-red-400 transition-colors">{link.title}</h3>
                    <ArrowRight className="w-4 h-4 text-gray-500 group-hover:text-red-400 transition-colors shrink-0" />
                  </div>
                  <p className="text-xs text-gray-400">{link.desc}</p>
                </Link>
              ))}
            </div>
          </div>
        </section>

        {/* CTA */}
        <section className="py-16 sm:py-20 bg-gradient-to-b from-[#0d1117] to-[#131927]">
          <div className="container mx-auto px-4 sm:px-6 max-w-3xl text-center">
            <h2 className="text-2xl sm:text-3xl font-bold mb-4">Jetzt Pentest-Kosten berechnen</h2>
            <p className="text-gray-400 mb-8 text-sm sm:text-base">
              Kostenloses Erstgespräch (30 Min.) — kein Verkaufsdruck. Wir analysieren Ihren Scope und erstellen ein verbindliches Festpreisangebot.
            </p>
            <Link
              href="/request-pentest"
              className="inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-8 py-4 rounded-lg font-semibold text-base transition-colors"
            >
              <Calculator className="w-5 h-5" />
              Pentest Kosten Berechnen
              <ArrowRight className="w-5 h-5" />
            </Link>
            <div className="mt-4">
              <Link href="/pentest-berlin" className="text-sm text-gray-500 hover:text-gray-300 transition-colors">
                ← Zurück zur Pentest Berlin Übersicht
              </Link>
            </div>
          </div>
        </section>
      </main>
    </>
  );
}
